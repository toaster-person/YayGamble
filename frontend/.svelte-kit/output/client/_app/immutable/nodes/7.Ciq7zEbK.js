import"../chunks/Bzak7iHL.js";import{i as te}from"../chunks/CJLlioOO.js";import{o as oe}from"../chunks/CnBhPSvY.js";import{p as se,f as M,a as ae,t as L,b as S,c as re,e as r,s as n,d as i,m as v,r as d,g as l}from"../chunks/D8DXxAzd.js";import{s as x}from"../chunks/BKyUyGuO.js";import{i as ne}from"../chunks/D2XiG5t3.js";import{e as le,i as ce}from"../chunks/BS0-grPP.js";import{s as N}from"../chunks/Db-KANGB.js";import{e as C}from"../chunks/0VhW8u6o.js";import{u as R,b as h,m}from"../chunks/CCDyYBUC.js";var ie=M("<p> </p>"),de=M('<div class="flex flex-col"><button class="text-[2rem] bg-[#bbb] dark:bg-[#4c4c4c] rounded-[15px] m-auto mt-[5%] w-[25%] border-">Admin Dashboard</button></div>'),me=M('<h1 class="pt-[2%] m-auto text-center text-[3rem]">Welcome <strong> </strong>, you currently have <strong> </strong></h1> <title>Home</title> <div id="links" class="bg-[#bbbbbb] dark:bg-[#3c3c3c] m-auto size-fit p-[2%] rounded-[15px] flex flex-col text-center text-[1.5rem]"><a>Slot Machine</a> <a>Blackjack</a>  <button type="button" class="text-(--red) bg-transparent border-none cursor-pointer hover:underline hover:decoration-wavy hover:decoration-(--blue)">Logout</button></div> <p class="m-auto mt-[3%] size-fit text-center text-[1.5rem]" id="msg"> </p> <button class="bg-[#bbbbbb] border-[2px solid #bbbbbb] dark:bg-[#4c4c4c] border-2 border-solid dark:border-[#4c4c4c] border-[#bbbbbb] transition duration-500 hover:bg-[#fbfbfb] dark:hover:bg-[#1c1c1c] m-auto size-fit p-[2%] rounded-[15px] flex flex-col text-center text-[1.5rem]"> </button> <div class="m-auto mt-[5%] size-fit p-[2%]] flex flex-col text-center text-[1.5rem]"><p class="text-[2rem]">Leaderboard</p> <!></div> <!>',1);function $e(q,A){se(A,!1);let $=v("person"),f=v(0),b=v("Collect $1000"),u=v(""),z=v([]);var B=!1;async function J(){let o="";const t=localStorage.getItem("sessionID");t!==null&&(o=t);let e=await fetch(h+"/user",{headers:{sessionID:o}});if(e.status==403||e.status==401){let p=await e.json();m(`/?msg=${p.message}`)}e.ok||console.log(await e.text());let s=await e.json();if(r($,s.username),r(f,s.balance),e=await fetch(h+"/baltop",{headers:{sessionID:o}}),e.status==403||e.status==401){let p=await e.json();m(`/?msg=${p.message}`)}e.ok||console.log(await e.text()),s=await e.json(),r(z,s),console.log("requesting data");const a=await fetch(h+"/collecttime",{headers:{sessionID:o}}),c=await a.json();a.ok||console.log(c),console.log("printing data"),console.log(c),a.status==403||a.status==401?m(`/?msg=${c.message}`):c.cooldown==0?(g=0,r(b,"Collect $1000")):(g=c.cooldown,r(b,`Cooldown: ${w(c.cooldown)}`))}async function P(){let o="";const t=localStorage.getItem("sessionID");t!==null&&(o=t);const e=JSON.stringify({balance:l(f),collect:!0,method:"collect"}),s={"Content-Type":"application/json",sessionID:o},a=await fetch(h+"/updateuser",{method:"POST",body:e,headers:s});if(a.status==403||a.status==401){let p=await a.json();m(`/?msg=${p.message}`)}const c=await a.json();(a.status==403||a.status==401)&&m(`/?msg=${c.message}`),console.log(c.message)}function U(){localStorage.removeItem("sessionID"),m("/")}function w(o){let t=o/1e3;const e=t/60;return t=t%60,`${Math.round(e)}m & ${Math.round(t)}s`}var g=0;async function W(){let o="";const t=localStorage.getItem("sessionID");t!==null&&(o=t);let e=await fetch(h+"/collect",{headers:{sessionID:o}});const s=await e.json(),a=document.getElementById("msg");console.log(e),e.ok?(r(f,l(f)+1e3),P(),r(u,s.message),a&&(a.style.color="green"),g=s.cooldown,r(b,`Cooldown: ${w(s.cooldown)}`)):((e.status==403||e.status==401)&&m(`/?msg=${s.message}`),r(u,s.message),a&&(a.style.color="#ee2c2c"),g=s.cooldown,r(b,`Cooldown: ${w(s.cooldown)}`))}function F(){g>0?(g-=1e3,r(b,`Cooldown: ${w(g)}`)):(B?r(u,""):r(u,"Consider enabling dark mode for a better viewing experience!"),r(b,"Collect $1000"))}setInterval(()=>{F()},1e3),oe(()=>{console.log("getting data"),J(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(B=!0,r(u,"")):r(u,"Consider enabling dark mode for a better viewing experience!")}),te();var T=me(),_=ae(T),y=n(i(_)),G=i(y,!0);d(y);var H=n(y,2),K=i(H);d(H),d(_);var I=n(_,4),O=i(I),E=n(O,2),Q=n(E,2);d(I);var D=n(I,2),V=i(D,!0);d(D);var k=n(D,2),X=i(k,!0);d(k);var j=n(k,2),Y=n(i(j),2);le(Y,1,()=>l(z),ce,(o,t,e)=>{var s=ie(),a=i(s);d(s),L(()=>x(a,`${e+1}) ${l(t).username??""} = $${l(t).balance??""}`)),S(o,s)}),d(j);var Z=n(j,2);{var ee=o=>{var t=de(),e=i(t);d(t),C("click",e,()=>m("/admin")),S(o,t)};ne(Z,o=>{l($)==="admin"&&o(ee)})}L(()=>{x(G,l($)),x(K,`$${l(f)??""}`),N(O,"href",`${R}/games/slots`),N(E,"href",`${R}/games/blackjack`),x(V,l(u)),x(X,l(b))}),C("click",Q,U),C("click",k,W),S(q,T),re()}export{$e as component};
