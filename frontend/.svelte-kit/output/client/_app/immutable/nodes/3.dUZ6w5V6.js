import"../chunks/Bzak7iHL.js";import{i as U}from"../chunks/CJLlioOO.js";import{o as j}from"../chunks/CnBhPSvY.js";import{p as C,e as s,g as a,f as D,s as c,a as T,t as A,b as H,c as J,m as b,d as w,r as $,aU as M}from"../chunks/D8DXxAzd.js";import{s as N}from"../chunks/BKyUyGuO.js";import{r as k,s as R}from"../chunks/Db-KANGB.js";import{e as W}from"../chunks/0VhW8u6o.js";import{b as E}from"../chunks/7L7bas56.js";import{s as q,a as F}from"../chunks/Dfmw8iVc.js";import{s as G}from"../chunks/BMWYtcrf.js";import{b as K,m as I,u as Q}from"../chunks/CCDyYBUC.js";const V=()=>{const r=G;return{page:{subscribe:r.page.subscribe},navigating:{subscribe:r.navigating.subscribe},updated:r.updated}},X={subscribe(r){return V().page.subscribe(r)}};var Y=D(`<title>Login</title> <div id="bigdiv" class="m-auto mt-[10%] bg-[#bbb] dark:bg-[#3c3c3c] shadow-[0_0_50px_15px_#34adfe] rounded-[10%] size-fit p-[5%] text-center flex flex-col gap-5"><h1 class="text-[3rem] m-0">Login</h1> <p class="text-[1.5rem]" id="msg"> </p> <input type="text" placeholder="Username" class="svelte-hzmrex"/> <input type="password" placeholder="Password" class="svelte-hzmrex"/> <button id="submit" class="text-[1.5rem] bg-[#ccc] dark:bg-[#4c4c4c] hover:shadow-[0_0_10px_5px_#34adfe] border-solid border-2 border-(--white) rounded-[5px] dark:text-(--white) text-(--black) m-auto p-[3%]">Login</button> <a class="text-[1.5rem]">Or Create a new Account</a></div> <h1 class="text-center mt-[5%] text-[1.5rem]">Welcome to my site! <br/>Please create an account of your're new.</h1>`,1);function le(r,h){C(h,!1);const[P,L]=F(),O=()=>q(X,"$page",P);let n=b(""),m=b(""),i=b(""),p="#ee2c2c",e=O().url.searchParams;e.has("msg")&&s(i,e.get("msg")??a(i)),e.has("color")&&(p=e.get("color")??p),e.has("user")&&e.has("pass")&&(s(n,e.get("user")??a(n)),s(m,e.get("pass")??a(m)),x()),j(()=>{const t=document.getElementById("msg");t&&(t.style.color=p)});async function x(){s(i,"Loading...");let t=JSON.stringify({username:a(n),password:a(m),ip:await fetch("https://api.ipify.org").then(o=>o.text())}),B={"Content-Type":"application/json"};const l=await fetch(K+"/auth",{method:"POST",body:t,headers:B}),f=await l.json();if(!l.ok){const o=document.getElementById("msg");o&&(o.style.color="#ee2c2c"),s(i,"Error! Please yell at me to fix")}if(f.correct)localStorage.setItem("sessionID",f.sessionID),console.log(l.status),l.status==209&&I("/admin"),I("/home");else{const o=document.getElementById("msg");o&&(o.style.color="#ee2c2c"),s(i,f.message)}}U();var v=Y(),_=c(T(v),2),d=c(w(_),2),S=w(d,!0);$(d);var g=c(d,2);k(g);var u=c(g,2);k(u);var y=c(u,2),z=c(y,2);$(_),M(2),A(()=>{N(S,a(i)),R(z,"href",`${Q}/new`)}),E(g,()=>a(n),t=>s(n,t)),E(u,()=>a(m),t=>s(m,t)),W("click",y,x),H(r,v),J(),L()}export{le as component};
